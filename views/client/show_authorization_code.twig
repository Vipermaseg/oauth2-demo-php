{% extends "client/base.twig" %}

{% block content %}
    <h3>¡Código de autorización coneguido!</h3>
    <p>Nos han dado un <strong>Códifo de autorización</strong> del Servidor de OAuth2.0:</p>
    <pre><code>  Authorization Code: {{ code }}  </code></pre>

    <p>
        Ahora intercambiamos el Código de autorización por un <strong>Token de acceso</strong>:
    <p>

    <a class="button" href="{{ path('request_token_with_authcode', { 'code': code, show_refresh_token: app.request.get('show_refresh_token') }) }}">hacer petición de token</a>

    <div class="help"><em>Normalmente esto de hace tras bambalinas, ¡pero estamos yendo paso a paso para no perderns nada!</em></div>

    {% if app.request.get("id_token") %}
        {% include 'client/_id_token.twig' with { id_token: app.request.get("id_token") } %}
    {% endif %}

    <a href="{{ path('homepage') }}">volver</a>
{% endblock %}
